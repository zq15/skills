---
name: tool-log-viewer
description: "Query and analyze Claude Code tool call logs. View statistics, recent calls, detailed information, filter by tool name, and identify slow operations. Works with logs generated by the tool call hooks."
metadata:
  {
    "openclaw":
      {
        "emoji": "ðŸ“Š",
        "requires": { "bins": ["python3"] }
      }
  }
---

# Tool Log Viewer

Query and analyze tool call logs recorded by Claude Code hooks.

## Overview

This skill provides a Python script for analyzing tool call logs at `~/.claude/tool_calls.log`. The logs are generated by hooks configured in `settings.json` that record every tool invocation with timing and result information.

## Commands

### Show Summary Statistics

View overall statistics for all tool calls:

```bash
scripts/query_logs.py summary
```

Output includes:
- Total number of calls
- Calls per tool
- Average execution time per tool
- Total time spent per tool

### Show Recent Calls

View the most recent tool calls:

```bash
scripts/query_logs.py recent
```

With custom limit:

```bash
scripts/query_logs.py recent 20
```

### Show Detailed Information

View full details for a specific call:

```bash
# Last call
scripts/query_logs.py detail

# Second to last
scripts/query_logs.py detail -2

# First call
scripts/query_logs.py detail 0
```

Detailed output includes:
- Timestamp and duration
- Tool name and IDs
- Full input parameters
- Complete result (truncated if too long)

### Filter by Tool Name

View all calls for a specific tool:

```bash
scripts/query_logs.py filter Bash
scripts/query_logs.py filter Read
scripts/query_logs.py filter Edit
```

Shows:
- List of all matching calls with timestamps
- Statistics (count, avg/min/max time)

### Find Slow Calls

Identify slow tool executions:

```bash
# Show calls slower than 1 second (default)
scripts/query_logs.py slow

# Custom threshold (in milliseconds)
scripts/query_logs.py slow 500
scripts/query_logs.py slow 2000
```

## Common Workflows

**Diagnose performance issues:**

```bash
# Find the slowest operations
scripts/query_logs.py slow 1000

# Check specific tool performance
scripts/query_logs.py filter Bash
```

**Review recent activity:**

```bash
# Quick overview
scripts/query_logs.py recent 5

# Detailed inspection of last call
scripts/query_logs.py detail
```

**Analyze usage patterns:**

```bash
# See which tools are used most
scripts/query_logs.py summary
```

**Debug specific operations:**

```bash
# Filter by tool type
scripts/query_logs.py filter WebFetch

# Examine specific call details
scripts/query_logs.py detail -3
```

## Log Format

Logs are stored as JSON lines in `~/.claude/tool_calls.log`:

```json
{
  "timestamp": "2026-02-11T10:30:45Z",
  "session_id": "abc123",
  "tool_name": "Bash",
  "tool_use_id": "toolu_01ABC...",
  "duration_ms": 1234.5,
  "input": { "command": "ls -la" },
  "result": { "stdout": "...", "exitCode": 0 }
}
```

## Requirements

- Python 3.6+
- Tool call logging hooks must be configured in `~/.claude/settings.json`

## Related Files

- Log file: `~/.claude/tool_calls.log`
- Hook scripts: `~/.claude/hooks/record-tool-start.sh` and `record-tool-end.sh`
- Settings: `~/.claude/settings.json`
